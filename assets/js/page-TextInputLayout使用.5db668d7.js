(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{890:function(t,e,a){"use strict";a.r(e);var r=a(1),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍"}},[t._v("#")]),t._v(" 1. 介绍")]),t._v(" "),a("p",[a("code",[t._v("TextInputLayout")]),t._v(" 是 Android 6.0 提供的新的输入框架，可以显示一个更好的输入效果。")]),t._v(" "),a("p",[t._v("以下是 "),a("code",[t._v("TextInputLaout")]),t._v(" 的显示效果")]),t._v(" "),a("center",[t._v("![](https://blog.incredibleandros.com/images/textInputlayout.gif)")]),t._v(" "),a("h2",{attrs:{id:"_2-基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-基本使用"}},[t._v("#")]),t._v(" 2. 基本使用")]),t._v(" "),a("h3",{attrs:{id:"_2-1-添加依赖框架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-添加依赖框架"}},[t._v("#")]),t._v(" 2.1 添加依赖框架")]),t._v(" "),a("p",[t._v("TextInputLayout 是 Android design 库的控件，所以需要添加 Android 的 design 库。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  compile 'com.android.support:appcompat-v7:23.3.0'\n  compile 'com.android.support:design:23.3.0'\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2-2-xml-代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-xml-代码"}},[t._v("#")]),t._v(" 2.2 XML 代码")]),t._v(" "),a("p",[t._v("在这里要注意， "),a("code",[t._v("TextInputLayout")]),t._v(" 实际上是一个 "),a("code",[t._v("Layout")]),t._v(" 控件，"),a("strong",[t._v("不能提供输入框功能")])]),t._v(" "),a("p",[t._v("输入框应由其中的 "),a("code",[t._v("TextInputEditText")]),t._v(" 提供。")]),t._v(" "),a("p",[t._v("其实使用 "),a("code",[t._v("EditText")]),t._v(" 代替也是可以的，但是 Google 官方更加推崇 TextInput 系列的配套使用")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<android.support.design.widget.TextInputLayout\n          android:layout_width="fill_parent"\n          android:id="@+id/your_matchcode_holder"\n          app:errorEnabled="true"\n          android:layout_height="wrap_content">\n\n        <android.support.design.widget.TextInputEditText\n            android:id="@+id/your_matchcode"\n            android:layout_width="match_parent"\n            android:layout_height="wrap_content"\n</android.support.design.widget.TextInputLayout>\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("h3",{attrs:{id:"_2-3-相应效果的设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-相应效果的设置"}},[t._v("#")]),t._v(" 2.3 相应效果的设置")]),t._v(" "),a("p",[a("code",[t._v("TextInputLayout")]),t._v(" 区别于 "),a("code",[t._v("EditText")]),t._v(" 的一点在于，一些提示效果，如 Hint 和 Error Message 需要在 "),a("strong",[t._v("Java")]),t._v(" 代码中进行设置。")]),t._v(" "),a("p",[t._v("注意，因为 "),a("code",[t._v("TextInputLayout")]),t._v(" 中内置了 "),a("code",[t._v("getEditText()")]),t._v(" 方法，所以"),a("strong",[t._v("只需要给 "),a("code",[t._v("TextInputLayout")]),t._v(" 设置 id 即可")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"_2-3-1-hint-效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-hint-效果"}},[t._v("#")]),t._v(" 2.3.1 Hint 效果")]),t._v(" "),a("p",[t._v("设置 "),a("code",[t._v("TextInputLayout")]),t._v(" 的 Hint 效果很简单，只需要调用 "),a("code",[t._v("setHint()")]),t._v(" 方法即可。")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("phoneWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("R")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("login_hint_phone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-3-2-error-效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-error-效果"}},[t._v("#")]),t._v(" 2.3.2 Error 效果")]),t._v(" "),a("p",[t._v("设置 "),a("code",[t._v("TextInputLayout")]),t._v(" 的 Error 效果则有点 tricky。")]),t._v(" "),a("p",[t._v("一般来说，设置 Error 效果和 Hint 一样，调用 "),a("code",[t._v("setError()")]),t._v(" 即可。")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("phoneWrapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setError")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("phoneNumberErrorMessage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("p",[a("code",[t._v('setError("error message")')]),t._v(" 会判断如果 Error 没有 Enable 的话，会先调用 "),a("code",[t._v("setErrorEnable(true)")]),t._v("，所以设置 Error "),a("strong",[t._v("不需要事先设置 "),a("code",[t._v("setErrorEnable(true)")])])])]),t._v(" "),a("p",[t._v("但是，当需要清除 Error 效果时，则"),a("strong",[t._v("必须需要两步。")])]),t._v(" "),a("ol",[a("li",[t._v("设置 "),a("code",[t._v("setError(null)")])]),t._v(" "),a("li",[t._v("设置 "),a("code",[t._v("setErrorEnable(false)")])])]),t._v(" "),a("blockquote",[a("p",[t._v("原因在于，"),a("code",[t._v("setError(null)")]),t._v(" 只会把 "),a("code",[t._v("Error")]),t._v(" 设置为 "),a("code",[t._v("View.INVISIABLE")]),t._v("，不会消除错误信息所占的空间。\n所以，我们需要使用 "),a("code",[t._v("setErrorEnable(false)")]),t._v(" 去将显示错误的 "),a("code",[t._v("TextView")]),t._v(" 删除掉，从而消除错误所占的空间。")])]),t._v(" "),a("blockquote",[a("p",[t._v("那能不能"),a("strong",[t._v("只调用 "),a("code",[t._v("setErrorEnable(false)")]),t._v(" 呢")]),t._v("？\n答案是"),a("strong",[t._v("不能")]),t._v("。\n原因在于，"),a("code",[t._v("setErrorEnable(false)")]),t._v("，不会消除存储错误信息的 "),a("code",[t._v("mError")]),t._v("，而当再次出现同样的错误，设置 "),a("code",[t._v('setError("error message")')]),t._v(" 时，由于 "),a("code",[t._v("mError")]),t._v(" 没有更新，导致 "),a("code",[t._v("setError()")]),t._v(" 判断"),a("strong",[t._v("前后错误信息一致，直接返回，没有重新生成 "),a("code",[t._v("TextView")]),t._v("，从而错误信息就不会再显示了。")])])])],1)}),[],!1,null,null,null);e.default=s.exports}}]);